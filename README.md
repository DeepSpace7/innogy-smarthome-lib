# Innogy SmartHome Client API JavaScript Library

The official JavaScript library for using the Innogy SmartHome system.

The library abstracts the RESTful Innogy SmartHome Client API in a platform independent JavaScript library, which is distributed for applications using Node.js or the browser.

## Using the Library

(tbd)

### With Node.js

(tbd)

### With a Browser

(tbd)

### Code Examples

(tbd)

## Developing

The library itself is written in TypeScript to provide some flexibility regarding the usages. This allows us to safely define some interfaces that can then be consumed by developers. As a consequence the developer does not need to consult the Innogy SmartHome API documentation for some calls, but rather relies on the code completion provided by his/her favorite IDE (which needs to support TypeScript).

### Compiling the Library

Be sure to start by resolving the dependencies of the project. We use `npm` to help us resolving all the packages.

```bash
npm install
```

The library uses the [Gulp](http://gulpjs.com) task runner. By default the following command tries to build everything from scratch:

```bash
gulp
```

Be sure to have a working installation of Gulp before running the previous command. Furthermore, more targets exist. Among these targets we find:

* `compile-all` compiles everything
* `compile-node` compiles the Node.js version
* `compile-dom` compiles the browser version
* `types` builds the type definition file
* `test` compiles and runs the unit tests

### Code Structure

Besides some of the standard directories we have the following folders:

* `src`, where the source files of the library is placed
* `test`, where the unit tests of the library are placed
* `dist`, where the generated output of the library is stored

The latter is not checked into version control as it can be easily generated by invoking `gulp`.

The `test` folder follows the following conventions:

* Files with unit tests need to end with *Test.ts*
* Mocks should be placed in the `mocks` subdirectory

The `src` folder follows the following conventions:

* Platform-specific code is located in the dedicated `platforms` sub-folder, e.g., `node` for Node.js
* Common utilities are placed in the `utils` folder - these are all functional
* All interfaces modeling the system should be put in the `interfaces` folder

The `interfaces` in the `src` directory are structured as follows:

* Library interfaces are put in the root folder
* Responses to API actions are put in the `responses` directory
* Entities defined in the SmartHome API are placed in the `entities` folder

The latter distinguishes between SmartHome API entities (suffix `Entity`) and standard abstracted types, e.g., `Property` or `Link`. The abstracted types are not suffixed and may appear like standard JavaScript type annotations.

### Error Handling

(tbd)

### Publishing

The publishing process is based on `npm` again. By using the following command a `*.tgz` file will be created in the root directory.

```bash
npm pack
```

The file follows the rules governed by the `package.json` and `.npmignore` file. Essentially, it will contain the `dist/node` directory's content, the `package.json`, as well as the markdown content files providing some descriptions of the library.

## Contributing

Any contributions are welcome. However, before filing a pull request (PR) an issue should be opened. The issue should contain:

* What improvement / fix is needed
* How the solution will look like
* If on-going: the current process
* Where the improvement is helping or how the bug can be reproduced

The PR needs to contain unit tests to cover the code changes. PRs to the `master` branch cannot be accepted, so please make sure to target the `devel` branch.

More information about our contribution guidelines can be found in the [CONTRIBUTING file](CONTRIBUTING.md).

## License

The library has been licensed under the MIT license. Details are given the [distributed license file](LICENSE.md).
